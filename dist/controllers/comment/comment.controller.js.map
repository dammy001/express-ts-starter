{"version":3,"sources":["../../../src/controllers/comment/comment.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express'\nimport { Controller } from '../abstract.controller'\nimport { prisma } from '@/lib'\nimport { StatusCode } from '@/utils'\n\nexport class CommentController extends Controller {\n  async addCommentToPost(req: Request, res: Response, next: NextFunction) {\n    try {\n      const { userId, comment } = req.body\n      if (\n        !(await prisma.user.findFirst({ where: { id: req.body.userId }, select: { id: true } })) ||\n        !(await prisma.post.findFirst({ where: { id: req.params.id }, select: { id: true } }))\n      ) {\n        return Controller.error(res, 'User/Post not found', {}, StatusCode.NOT_FOUND)\n      }\n\n      const commentInput = await prisma.comment.create({\n        data: { comment, postId: req.params.id, userId },\n        select: { id: true, comment: true, createdAt: true },\n      })\n\n      return Controller.success(\n        res,\n        commentInput,\n        'Comment Created Successfully',\n        StatusCode.CREATED,\n      )\n    } catch (err) {\n      next(err)\n    }\n  }\n}\n"],"names":["CommentController","Controller","addCommentToPost","req","res","next","userId","comment","body","prisma","user","findFirst","where","id","select","post","params","error","StatusCode","NOT_FOUND","commentInput","create","data","postId","createdAt","success","CREATED","err"],"mappings":";;;;+BAKaA;;;eAAAA;;;oCAJc;qBACJ;uBACI;AAEpB,MAAMA,0BAA0BC,8BAAU;IAC/C,MAAMC,iBAAiBC,GAAY,EAAEC,GAAa,EAAEC,IAAkB,EAAE;QACtE,IAAI;YACF,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAE,GAAGJ,IAAIK,IAAI;YACpC,IACE,CAAE,MAAMC,WAAM,CAACC,IAAI,CAACC,SAAS,CAAC;gBAAEC,OAAO;oBAAEC,IAAIV,IAAIK,IAAI,CAACF,MAAM;gBAAC;gBAAGQ,QAAQ;oBAAED,IAAI;gBAAK;YAAE,MACrF,CAAE,MAAMJ,WAAM,CAACM,IAAI,CAACJ,SAAS,CAAC;gBAAEC,OAAO;oBAAEC,IAAIV,IAAIa,MAAM,CAACH,EAAE;gBAAC;gBAAGC,QAAQ;oBAAED,IAAI;gBAAK;YAAE,IACnF;gBACA,OAAOZ,8BAAU,CAACgB,KAAK,CAACb,KAAK,uBAAuB,CAAC,GAAGc,iBAAU,CAACC,SAAS;YAC9E;YAEA,MAAMC,eAAe,MAAMX,WAAM,CAACF,OAAO,CAACc,MAAM,CAAC;gBAC/CC,MAAM;oBAAEf;oBAASgB,QAAQpB,IAAIa,MAAM,CAACH,EAAE;oBAAEP;gBAAO;gBAC/CQ,QAAQ;oBAAED,IAAI;oBAAMN,SAAS;oBAAMiB,WAAW;gBAAK;YACrD;YAEA,OAAOvB,8BAAU,CAACwB,OAAO,CACvBrB,KACAgB,cACA,gCACAF,iBAAU,CAACQ,OAAO;QAEtB,EAAE,OAAOC,KAAK;YACZtB,KAAKsB;QACP;IACF;AACF"}