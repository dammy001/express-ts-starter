{"version":3,"sources":["../../../src/lib/prisma/index.ts"],"sourcesContent":["import type { Prisma } from '@prisma/client'\nimport { PrismaClient } from '@prisma/client'\n\nimport softDeleteMiddleware from './middleware/soft-delete.middleware'\n\ndeclare global {\n  // eslint-disable-next-line no-var, vars-on-top\n  var prisma: PrismaClient | undefined\n}\n\nconst prismaOptions: Prisma.PrismaClientOptions = {}\n\nif (process.env.NODE_ENV !== 'production')\n  prismaOptions.log = ['query', 'error', 'warn'] as Prisma.LogLevel[]\n\nexport const prisma = globalThis.prisma || new PrismaClient(prismaOptions)\n\nexport const customPrisma = (options: Prisma.PrismaClientOptions) =>\n  new PrismaClient({ ...prismaOptions, ...options })\n\nif (process.env.NODE_ENV !== 'production') globalThis.prisma = prisma\n\nprisma.$extends({\n  result: {\n    user: {\n      fullName: {\n        needs: { firstName: true, lastName: true },\n        compute(user) {\n          return `${user.firstName} ${user.lastName}`\n        },\n      },\n    },\n  },\n})\n\n// If any changed on middleware server restart is required\nsoftDeleteMiddleware(prisma)\n\nexport * from './selects'\n\nexport default prisma\n"],"names":["prisma","customPrisma","prismaOptions","process","env","NODE_ENV","log","globalThis","PrismaClient","options","$extends","result","user","fullName","needs","firstName","lastName","compute","softDeleteMiddleware"],"mappings":";;;;;;;;;;;IAeaA,MAAM;eAANA;;IAEAC,YAAY;eAAZA;;IAuBb,OAAqB;eAArB;;;wBAvC6B;6EAEI;qBAmCnB;;;;;;;;;;;;;;;;;;;AA5Bd,MAAMC,gBAA4C,CAAC;AAEnD,IAAIC,QAAQC,GAAG,CAACC,QAAQ,KAAK,cAC3BH,cAAcI,GAAG,GAAG;IAAC;IAAS;IAAS;CAAO;AAEzC,MAAMN,SAASO,WAAWP,MAAM,IAAI,IAAIQ,oBAAY,CAACN;AAErD,MAAMD,eAAe,CAACQ,UAC3B,IAAID,oBAAY,CAAC;QAAE,GAAGN,aAAa;QAAE,GAAGO,OAAO;IAAC;AAElD,IAAIN,QAAQC,GAAG,CAACC,QAAQ,KAAK,cAAcE,WAAWP,MAAM,GAAGA;AAE/DA,OAAOU,QAAQ,CAAC;IACdC,QAAQ;QACNC,MAAM;YACJC,UAAU;gBACRC,OAAO;oBAAEC,WAAW;oBAAMC,UAAU;gBAAK;gBACzCC,SAAQL,IAAI;oBACV,OAAO,CAAC,EAAEA,KAAKG,SAAS,CAAC,CAAC,EAAEH,KAAKI,QAAQ,CAAC,CAAC;gBAC7C;YACF;QACF;IACF;AACF;AAEA,0DAA0D;AAC1DE,IAAAA,6BAAoB,EAAClB;MAIrB,WAAeA"}